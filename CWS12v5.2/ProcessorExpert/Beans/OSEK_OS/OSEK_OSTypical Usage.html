<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="content-type" content="text/html; charset=windows-1250">
<title>
Component documentation - Typical Usage
</title>
<STYLE type="text/css">
body{
  background-color: white;
  margin:0px;
  font: 13px Helvetica Neue, Helvetica, Arial, sans-serif;
}
A:visited {
	COLOR: #2D8AA7; TEXT-DECORATION: none
}
A:link {
	COLOR: #2D8AA7; TEXT-DECORATION: none
}
A:active {
	COLOR: #2D8AA7; TEXT-DECORATION: none
}
A:hover {
	COLOR: #2D8AA7; TEXT-DECORATION: underline
}
.VSP {
	COLOR: #2D8AA7; FONT: bold italic 14px Helvetica Neue, Helvetica, Arial, sans-serif;
}
.reflink {
	FONT: 11px/18px Helvetica Neue, Helvetica, Arial, sans-serif;
 	COLOR: #2D8AA7;
}
.user_text {
	FONT: 12px/18px Helvetica Neue, Helvetica, Arial, sans-serif;
	COLOR: #000000;
}
.bluetext {
  COLOR: #695F52;
}
.versionspec {
  padding:5px; 
  background-color: RGB(243, 242, 230);
  margin-top:5px;
  margin-bottom:5px;  
}
.versionspecdetail {
  padding:5px; 
  background-color: RGB(243, 242, 230);
  margin-top:5px;
  margin-bottom:5px;  
}
.versionspeclabel {
  font-style: italic;
}
LI.DEF {
  list-style-image: url(DefaultLI.gif) ;
}
LI.BAS {
	list-style-image: url(BasicLI.gif) ;
}
LI.ADV {
	list-style-image: url(AdvancedLI.gif) ;
}
LI.EXP {
	list-style-image: url(ExpertLI.gif) ;
}
.titlebox {  
  font: bold 18px Helvetica Neue, Helvetica, Arial, sans-serif;
  color: #51626F;
  margin-bottom: 10px;
}
.lefttitlebox {
  background-color:#C3CFD1;  
}
.lefttitle {
  color:#51626F;
  font: bold 11px Helvetica Neue, Helvetica, Arial, sans-serif;   
}
.beanname {
  font: bold 14px/18px Helvetica Neue, Helvetica, Arial, sans-serif;
  padding-top:6px;
  padding-bottom:5px;
  margin-bottom: 5px;
  border-bottom-style: dotted;
  border-bottom-width: 1;  
}
.descrtext {
  font-style: italic;
  font: 14px/18px Helvetica Neue, Helvetica, Arial, sans-serif;  
  padding-bottom:9px;
}
.footer {
  color: #b0b0b0; 
  font: 9px Helvetica Neue, Helvetica, Arial, sans-serif;
  text-align: center;
  border-top-style: solid;
  border-top-color: #BOBOBO;
  border-top-width: 1px;  
  padding-top: 5px;
  margin-top: 20px;
}
.info_name {
  font: 9px Helvetica Neue, Helvetica, Arial, sans-serif;
  padding: 0px;
  color: black;
}
.info_text {
  font: 11px Helvetica Neue, Helvetica, Arial, sans-serif;
}
.text_title {
  COLOR: #000000; 
  FONT: bold 14px Helvetica Neue, Helvetica, Arial, sans-serif;
}
.descr_line {
  COLOR: gray; 
  FONT: 9px Helvetica Neue, Helvetica, Arial, sans-serif;
}
</STYLE>

</head>

<body>

<table border="0"  cellspacing="0" cellpadding="0">
  <tr>
    <td valign="top" width="150" >
      <table  width="150" height="160" cellpadding="3" cellspacing="0" border="0">
        <tbody>
        <tr class="lefttitlebox">
          <td width="4"></td>
          <td align="center" valign="middle" height="30" width="128">
            <span class="lefttitle">
<b>OSEK_OS</b>
            </span>
          </td>
        </tr>
        <tr height="700">
          <td width="4"></td>
          <td width="128" valign="top">
            &nbsp;<br />
            <div class="reflink">
<!---HTMLLISTBEG_SHORT DON'T CHANGE THIS LINE-->
<a href="OSEK_OS.html">General Info</a><br />
<a href="OSEK_OSProperties.html">Properties</a><br />
<a href="OSEK_OSMethods.html">Methods</a><br />
<a href="OSEK_OSEvents.html">Events</a><br />
<i>Typical Usage</i><br />
<!---HTMLLISTEND DON'T CHANGE THIS LINE-->
<br /><br /><br />
<a href="../../DOCs/PredefSymbols.html">Types &amp; definitions</a><br/>
<a href="../../DOCs/BEANindex.html">Component Index</a><br/>
<a href="../../DOCs/CPUindex.html">CPU Component Index</a><br/>
<a href="../../DOCs/EmbeddedBeans.html">Embedded Components</a><br/>
<a href="../../DOCs/BeanCategories.html">Components Categories</a><br/>

<br /><br /><br />
<center>
<img src="OSEK_OS_b.gif" alt="Component icon"/>


</center>
            </div>
          </td>
        </tr>
        </tbody>
      </table>
    </td>
    <td width="1" class="lefttitlebox" valign="top">
      <table class="lefttitlebox" width="1" cellpadding="0" cellspacing="0" height="100%" border="0">
        <tr class="lefttitlebox"><td width="1"></td></tr>
      </table>
    </td>
    <td style="padding-left:15px;padding-right:10px;" valign="top" align="left" width="100%">

         <div class="titlebox">
            <div class="beanname">
              Component
              
              
              OSEK_OS
            </div>
            <div class="descrtext">Encapsulation of OSEK/VDX compliant OS - HW specific configuration</div>
            <div class="info_name">Component Level: <span class="info_text"><a href="../../DOCs/BeanCategoriesInfo.html#LevelAbstraction">High</a></span></div>
            <div class="info_name">Category: 
              <span class="info_text">
              <a href="../../DOCs/BeanCategoriesInfo.html">SW-Operating System</a>
              
              </span>
            </div>
          </div>
          
          <div class="text_title">
              Typical Usage:
      		</div>		 
    		  <div class="descr_line">                  
              (Examples of a typical usage of the component in user code.
               For more information please 
               see the page <a href="..\..\DOCs\BeanCodeTypicalUsage.html">Component Code 
               Typical Usage</a>.)                   
          </div>          

<div class="user_text">   
<br/>       
<!---DESCBEG DON'T CHANGE THIS-->
 <hr size="1" color="#BOBOBO"/>
 <!-- MENU -->
<br/><b>Typical settings and usage of OSEK_OS component.</b>
<p>
  <UL>
<LI><B><a href="#Integration">(1) Integration of OSEK into Processor Expert</a></B>
<br/>
</LI><LI><B><a href="#Interrupts">(2) Configuring attributes of Interrupt handlers </a></B>
<br/>
  </LI></UL>
 </p>
 <hr size="1" color="#BOBOBO"/>
<p>
<B><a name="Integration">(1) Integration of OSEK into Processor Expert</a></B>
</p>
<FONT style="COLOR: #000000; FONT: 12px/18px Verdana, Geneva, Arial, Helvetica, sans-serif">
	 Processor Expert and OSEK are integrated by means of OSEK_OS component. Basically the component configures CPU related attributes in OS
	 definition (see OSEK reference manual). Required component name is "os1" for this example.
   A System timer must be enabled in OSEK_OS component with the name of associated counter object "SYSTEMTIMER" (<a href="OSEK_OSProperties.html#SysCtrName">OSEK system counter name</a> item).
	 Timer peripheral (<a href="OSEK_OSProperties.html#Cmp">Timer</a> item) and period of the System timer (<a href="OSEK_OSProperties.html#Tmg">Initial period</a> item) must be selected in the OSEK_OS component.
	 During code generation, Processor expert generates CPU specific configuration include file "TargetMcu.oin" and
	 target specific configuration include file "TargetInclude.oin".
</FONT>
<p><FONT style="COLOR: #000000; FONT: 12px/18px Verdana, Geneva, Arial, Helvetica, sans-serif">
User should use the object name "SYSTEMTIMER" and include both "TargetMcu.oin" and "TargetInclude.oin" in her/his
main OSEK configuration file. It is also necessary to define at least
one task in the configuration file. In the example of "osdef.oil", two tasks (InitTask and CyclicTask) and one alarm (CyclicAlarm) are defined. <br/>
Note: following example is automatically pre-generated to "osdef.oil" user file when a new project is created, or OSEK_OS component is inserted to the project.
It may be changed according to the application needs.
</FONT>
<PRE>
 <I><U>osdef.oil</U></I>

OIL_VERSION = "2.3";

#include "TargetInclude.oin"

CPU cpu1 {
     APPMODE Mode;
#include "TargetMcu.oin"   //include generated oil file
    OS os1 {                   //use OSEK_OS component name
        STATUS = EXTENDED;     //other OS attributes
        DEBUG_LEVEL = 2;
        STARTUPHOOK = FALSE;
        ERRORHOOK = FALSE;
        SHUTDOWNHOOK = FALSE;
        PRETASKHOOK = FALSE;
        POSTTASKHOOK = FALSE;
        ResourceScheduler = FALSE;
        USEGETSERVICEID = FALSE;
        USEPARAMETERACCESS = FALSE;
    };

    TASK InitTask {        //InitTask - task activated during system startup, priority 5
        SCHEDULE = FULL;
        AUTOSTART = TRUE;
        ACTIVATION = 1;
        PRIORITY = 5;
    };
    TASK CyclicTask {      //CyclicTask - not activated during system startup, priority 0
        SCHEDULE = FULL;
        AUTOSTART = FALSE;
        ACTIVATION = 1;
        PRIORITY = 0;
    };
    ALARM CyclicAlarm {    //CyclicAlarm - connected to system timer, activates the CyclicTask
        COUNTER = SYSTEMTIMER;
        ACTION = ACTIVATETASK {
            TASK = CyclicTask;
        };
        AUTOSTART = FALSE;
    };

};

</PRE></p>
<p><FONT style="COLOR: #000000; FONT: 12px/18px Verdana, Geneva, Arial, Helvetica, sans-serif">
InitTask and CyclicTask task functions must be defined in a *.c file. <br/>
Note: following example is automatically pre-generated to "OSEK_main_tasks.c" user file when a new project is created, or OSEK_OS component is inserted to the project.
It may be changed according to the application needs.
</FONT>
<PRE>
 <I><U>OSEK_main_tasks.c</U></I>

TASK (InitTask) {
   (void)SetRelAlarm(CyclicAlarm, 3, 20);     //Set "CyclicAlarm" with init value = 3 and cycle 20
   (void)TerminateTask();
}

TASK (CyclicTask) {
   (void)TerminateTask();
}

</PRE>
</p>
<p><B><a name="Interrupts">(2) Configuring attributes of Interrupt handlers</a></B></p>
<FONT style="COLOR: #000000; FONT: 12px/18px Verdana, Geneva, Arial, Helvetica, sans-serif">
When a component with interrupts enabled is added to the project,
interrupts used by the component (or Cpu component) are by default declared as Category 1
without any additional attributes. If this default setting needs to be changed, the interrupt vector
must be registered in OSEK_OS component.
Configure OSEK_OS component the same way as in example (1).
Moreover, AsynchroSerial component (with "AS1" name) is required in the project to demonstrate OSEK integration with interrupts of other components.
<p>
  <UL>
<LI>Add one sub-item to <a href="OSEK_OSProperties.html#IntList">OSEK interrupt handlers</a> item in OSEK_OS component
<br/>
</LI>
<LI>Select desired interrupt vector in <a href="OSEK_OSProperties.html#IntVect">Interrupt vector</a> item in OSEK_OS component, i.e. select the same SCI interrupt vector as it is used in AsynchroSerial component ("Interrupt RxD" item in AsynchroSerial component).
<br/>
</LI>
<LI>Various ISR attributes as <a href="OSEK_OSProperties.html#Category">Category</a>, <a href="OSEK_OSProperties.html#Resources">Resources</a> or <a href="OSEK_OSProperties.html#Accessors">Accessors</a> may be set in OSEK_OS component.
<br/>
</LI></UL>
</p>
</FONT>
<!---DESCEND DON'T CHANGE THIS-->
</div>
          <p class="footer">
            PROCESSOR EXPERT is trademark of Freescale Semiconductor, Inc.
            <br />
            Copyright 1997 - 2010 Freescale Semiconductor, Inc.
          </p>
    </td>
  </tr>

</table>

</body>
</html>
