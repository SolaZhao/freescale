<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="content-type" content="text/html; charset=windows-1250">
<title>
Component  documentation - Methods
</title>
<STYLE type="text/css">
body{
  background-color: white;
  margin:0px;
  font: 13px Helvetica Neue, Helvetica, Arial, sans-serif;
}
A:visited {
	COLOR: #2D8AA7; TEXT-DECORATION: none
}
A:link {
	COLOR: #2D8AA7; TEXT-DECORATION: none
}
A:active {
	COLOR: #2D8AA7; TEXT-DECORATION: none
}
A:hover {
	COLOR: #2D8AA7; TEXT-DECORATION: underline
}
.VSP {
	COLOR: #2D8AA7; FONT: bold italic 14px Helvetica Neue, Helvetica, Arial, sans-serif;
}
.reflink {
	FONT: 11px/18px Helvetica Neue, Helvetica, Arial, sans-serif;
 	COLOR: #2D8AA7;
}
.user_text {
	FONT: 12px/18px Helvetica Neue, Helvetica, Arial, sans-serif;
	COLOR: #000000;
}
.bluetext {
  COLOR: #695F52;
}
.versionspec {
  padding:5px; 
  background-color: RGB(243, 242, 230);
  margin-top:5px;
  margin-bottom:5px;  
}
.versionspecdetail {
  padding:5px; 
  background-color: RGB(243, 242, 230);
  margin-top:5px;
  margin-bottom:5px;  
}
.versionspeclabel {
  font-style: italic;
}
LI.DEF {
  list-style-image: url(DefaultLI.gif) ;
}
LI.BAS {
	list-style-image: url(BasicLI.gif) ;
}
LI.ADV {
	list-style-image: url(AdvancedLI.gif) ;
}
LI.EXP {
	list-style-image: url(ExpertLI.gif) ;
}
.titlebox {  
  font: bold 18px Helvetica Neue, Helvetica, Arial, sans-serif;
  color: #51626F;
  margin-bottom: 10px;
}
.lefttitlebox {
  background-color:#C3CFD1;  
}
.lefttitle {
  color:#51626F;
  font: bold 11px Helvetica Neue, Helvetica, Arial, sans-serif;   
}
.beanname {
  font: bold 14px/18px Helvetica Neue, Helvetica, Arial, sans-serif;
  padding-top:6px;
  padding-bottom:5px;
  margin-bottom: 5px;
  border-bottom-style: dotted;
  border-bottom-width: 1;  
}
.descrtext {
  font-style: italic;
  font: 14px/18px Helvetica Neue, Helvetica, Arial, sans-serif;  
  padding-bottom:9px;
}
.footer {
  color: #b0b0b0; 
  font: 9px Helvetica Neue, Helvetica, Arial, sans-serif;
  text-align: center;
  border-top-style: solid;
  border-top-color: #BOBOBO;
  border-top-width: 1px;  
  padding-top: 5px;
  margin-top: 20px;
}
.info_name {
  font: 9px Helvetica Neue, Helvetica, Arial, sans-serif;
  padding: 0px;
  color: black;
}
.info_text {
  font: 11px Helvetica Neue, Helvetica, Arial, sans-serif;
}
.text_title {
  COLOR: #000000; 
  FONT: bold 14px Helvetica Neue, Helvetica, Arial, sans-serif;
}
.descr_line {
  COLOR: gray; 
  FONT: 9px Helvetica Neue, Helvetica, Arial, sans-serif;
}
</STYLE>

</head>

<body>

<table border="0"  cellspacing="0" cellpadding="0">
  <tr>
    <td valign="top" width="150" >
      <table  width="150" height="160" cellpadding="3" cellspacing="0" border="0">
        <tbody>
        <tr class="lefttitlebox">
          <td width="4"></td>
          <td align="center" valign="middle" height="30" width="128">
            <span class="lefttitle">
<b>InternalI2C</b>
            </span>
          </td>
        </tr>
        <tr height="700">
          <td width="4"></td>
          <td width="128" valign="top">
            &nbsp;<br />
            <div class="reflink">
<!---HTMLLISTBEG_SHORT DON'T CHANGE THIS LINE-->
<a href="InternalI2C.html">General Info</a><br />
<a href="InternalI2CProperties.html">Properties</a><br />
<i>Methods</i><br />
<a href="InternalI2CEvents.html">Events</a><br />
<a href="InternalI2CUser Types.html">Types and constants</a><br />
<a href="InternalI2CTypical Usage.html">Typical Usage</a><br />
<!---HTMLLISTEND DON'T CHANGE THIS LINE-->
<br /><br /><br />
<a href="../../DOCs/PredefSymbols.html">Types &amp; definitions</a><br/>
<a href="../../DOCs/BEANindex.html">Component Index</a><br/>
<a href="../../DOCs/CPUindex.html">CPU Component Index</a><br/>
<a href="../../DOCs/EmbeddedBeans.html">Embedded Components</a><br/>
<a href="../../DOCs/BeanCategories.html">Component Categories</a><br/>

<br /><br /><br />
<center>
<img src="InternalI2C_b.gif" alt="Component icon"/>


</center>
            </div>
          </td>
        </tr>
        </tbody>
      </table>
    </td>
    <td width="1" class="lefttitlebox" valign="top">
      <table class="lefttitlebox" width="1" cellpadding="0" cellspacing="0" height="100%" border="0">
        <tr class="lefttitlebox"><td width="1"></td></tr>
      </table>
    </td>
    <td style="padding-left:15px;padding-right:10px;" valign="top" align="left" width="100%" >

         <div class="titlebox">
            <div class="beanname">
              Component
              
              
              InternalI2C
            </div>
            <div class="descrtext">Internal I2C Communication Interface</div>
            <div class="info_name">Component Level: <span class="info_text"><a href="../../DOCs/BeanCategoriesInfo.html#LevelAbstraction">High</a></span></div>
            <div class="info_name">Category: 
              <span class="info_text">
              <a href="../../DOCs/BeanCategoriesInfo.html">CPU Internal Peripherals-Communication</a>
              
              </span>
            </div>
          </div>

         <div class="text_title">
              Methods:
    		 </div>		 
    		 <div class="descr_line">                  
              (Methods are user-callable functions/subroutines intended for
               the component functions control. Please see the <a href="../../DOCs/EmbeddedBeans.html#Methods">Embedded Components page</a> for more information.)                   
         </div>
                  
         <div class="user_text">
            <ul>
<!---USERBEG DON'T CHANGE THIS LINE-->

<!---USEREND DON'T CHANGE THIS LINE-->
<li><a name="Enable">
<b>Enable</b></a>
 - Enables I2C component. Events may be generated (&quot;DisableEvent&quot;/&quot;EnableEvent&quot;).
<ul>
<br /><i>ANSIC prototype:</i> byte Enable(void)<br />
<li><i>Return value:byte</i> - Error code, possible codes:<br />     ERR_OK - OK<br />     ERR_SPEED - This device does not work in the active speed mode
</li>
</ul><br />
</li>
<li><a name="Disable">
<b>Disable</b></a>
 - Disables I2C component. No events will be generated.
<ul>
<br /><i>ANSIC prototype:</i> byte Disable(void)<br />
<li><i>Return value:byte</i> - Error code, possible codes:<br />     ERR_OK - OK<br />     ERR_SPEED - This device does not work in the active speed mode
</li>
</ul><br />
</li>
<li><a name="EnableEvent">
<b>EnableEvent</b></a>
 - Enables the events.<br/>This method is enabled only if any event is generated.
<ul>
<br /><i>ANSIC prototype:</i> byte EnableEvent(void)<br />
<li><i>Return value:byte</i> - Error code, possible codes:<br />     ERR_OK - OK<br />     ERR_SPEED - This device does not work in the active speed mode
</li>
</ul><br />
</li>
<li><a name="DisableEvent">
<b>DisableEvent</b></a>
 - Disables the events.<br/>This method is enabled only if any event is generated.
<ul>
<br /><i>ANSIC prototype:</i> byte DisableEvent(void)<br />
<li><i>Return value:byte</i> - Error code, possible codes:<br />     ERR_OK - OK<br />     ERR_SPEED - This device does not work in the active speed mode
</li>
</ul><br />
</li>
<li><a name="SendChar">
<b>SendChar</b></a>
 - When working as a MASTER, this method writes one (7-bit addressing) or two (10-bit addressing) slave address bytes inclusive of R/W bit = 0 to the I2C bus and then writes one character (byte) to the bus. The slave address must be specified before, by the "SelectSlave" or "SelectSlave10" method or in the component initialization section, "Target slave address init" property. If interrupt service is enabled and the method returns ERR_OK, it doesn't mean that transmission was successful. The state of transmission is obtainable from (OnTransmitData, OnError or OnArbitLost) events.
<br/>When working as a SLAVE, this method writes a character to the internal output slave buffer and, after the master starts the communication, to the I2C bus. If no character is ready for a transmission (internal output slave buffer is empty), the Empty character will be sent (see "Empty character" property).
<ul>
<br /><i>ANSIC prototype:</i> byte SendChar(byte Chr)<br />
<li><i>Chr:byte</i> - Character to send.</li>
<li><i>Return value:byte</i> - Error code, possible codes:<br />     ERR_OK - OK<br />     ERR_SPEED - This device does not work in the active speed mode<br />     ERR_DISABLED -  Device is disabled<br />     ERR_BUSY - The slave device is busy, it does not respond by an acknowledge (only in master mode and when interrupt service is disabled)<br />     ERR_BUSOFF - Clock timeout elapsed or device cannot transmit data<br /><br />     ERR_TXFULL - Transmitter is full (slave mode only)<br />     ERR_ARBITR - Arbitration lost (only when interrupt service is disabled and in master mode)
</li>
</ul><br />
</li>
<li><a name="RecvChar">
<b>RecvChar</b></a>
 - When working as a MASTER, this method writes one (7-bit addressing) or two (10-bit addressing) slave address bytes inclusive of R/W bit = 1 to the I2C bus, then reads one character (byte) from the bus and then sends the stop condition. The slave address must be specified before, by the "SelectSlave" or "SelectSlave10" method or in component initialization section, property "Target slave address init". If interrupt service is enabled and the method returns ERR_OK, it doesn't mean that transmission was finished successfully. The state of transmission must be tested by means of events (OnReceiveData, OnError or OnArbitLost). In case of successful transmission, received data is ready after OnReceiveData event is called.
<br/>When working as a SLAVE, this method reads a character from the input slave buffer.
<ul>
<br /><i>ANSIC prototype:</i> byte RecvChar(byte *Chr)<br />
<li><i>Chr: Pointer to byte</i> - Received character.</li>
<li><i>Return value:byte</i> - Error code, possible codes:<br />     ERR_OK - OK<br />     ERR_SPEED - This device does not work in the active speed mode<br />     ERR_DISABLED -  Device is disabled<br />     ERR_BUSY - The slave device is busy, it does not respond by the acknowledge (only in master mode and when interrupt service is disabled)<br />     ERR_BUSOFF - Clock timeout elapsed or device cannot receive data<br />     ERR_RXEMPTY - No data in receiver (slave mode only)<br />     ERR_OVERRUN - Overrun error was detected from the last character or block received (slave mode only)<br />     ERR_ARBITR - Arbitration lost (only when interrupt service is disabled and in master mode)<br />     ERR_NOTAVAIL - Method is not available in current mode - see the comment in the generated code
</li>
</ul><br />
</li>
<li><a name="SendBlock">
<b>SendBlock</b></a>
 - When working as a MASTER, this method writes one (7-bit addressing) or two (10-bit addressing) slave address bytes inclusive of R/W bit = 0 to the I2C bus and then writes the block of characters to the bus. The slave address must be specified before, by the "SelectSlave" or "SlaveSelect10" method or in component initialization section, "Target slave address init" property. If interrupt service is enabled and the method returns ERR_OK, it doesn't mean that transmission was successful. The state of transmission is detectable by means of events (OnTransmitData, OnError or OnArbitLost). Data to be send is not copied to an internal buffer and remains in the original location. Therefore the content of the buffer should not be changed until the transmission is complete. Event OnTransmitData can be used to detect the end of the transmission.<br/>
When working as a SLAVE, this method writes a block of characters to the internal output slave buffer and then, after the master starts the communication, to the I2C bus. If no character is ready for a transmission (internal output slave buffer is empty), the "Empty character" will be sent (see "Empty character" property). In SLAVE mode the data are copied to an internal buffer, if specified by "Output buffer size" property.
<ul>
<br /><i>ANSIC prototype:</i> byte SendBlock(void* Ptr, word Siz, word *Snt)<br />
<li><i>Ptr:void*</i> - Pointer to the block of data to send.</li>
<li><i>Siz:word</i> - Size of the block.</li>
<li><i>Snt: Pointer to word</i> - Amount of data sent (moved to a buffer). In master mode, if interrupt support is enabled, the parameter always returns the same value as the parameter 'Siz' of this method.</li>
<li><i>Return value:byte</i> - Error code, possible codes:<br />     ERR_OK - OK<br />     ERR_SPEED - This device does not work in the active speed mode<br />     ERR_DISABLED -  Device is disabled<br />     ERR_BUSY - The slave device is busy, it does not respond by the acknowledge (only in master mode and when interrupt service is disabled)<br />     ERR_BUSOFF - Clock timeout elapsed or device cannot transmit data<br />     ERR_TXFULL - Transmitter is full. Some data has not been sent. (slave mode only)<br />     ERR_ARBITR - Arbitration lost (only when interrupt service is disabled and in master mode)
</li>
</ul><br />
</li>
<li><a name="RecvBlock">
<b>RecvBlock</b></a>
 - When working as a MASTER, this method writes one (7-bit addressing) or two (10-bit addressing) slave address bytes inclusive of R/W bit = 1 to the I2C bus, then reads the block of characters from the bus and then sends the stop condition. The slave address must be specified before, by the "SelectSlave" or "SelectSlave10" method or in component initialization section, "Target slave address init" property. If interrupt service is enabled and the method returns ERR_OK, it doesn't mean that transmission was finished successfully. The state of transmission must be tested by means of events (OnReceiveData, OnError or OnArbitLost). In case of successful transmission, received data is ready after OnReceiveData event is called.
<br/>When working as a SLAVE, this method reads a block of characters from the input slave buffer.
<ul>
<br /><i>ANSIC prototype:</i> byte RecvBlock(void* Ptr, word Siz, word *Rcv)<br />
<li><i>Ptr:void*</i> - A pointer to the block space for received data.</li>
<li><i>Siz:word</i> - The size of the block.</li>
<li><i>Rcv: Pointer to word</i> - Amount of received data. In master mode, if interrupt support is enabled, the parameter always returns the same value as the parameter 'Siz' of this method.</li>
<li><i>Return value:byte</i> - Error code, possible codes:<br />     ERR_OK - OK<br />     ERR_SPEED - This device does not work in the active speed mode<br />     ERR_DISABLED -  Device is disabled<br />     ERR_BUSY - The slave device is busy, it does not respond by an acknowledge (only in master mode and when interrupt service is disabled)<br />     ERR_BUSOFF - Clock timeout elapsed or device cannot receive data<br />     ERR_RXEMPTY - The receive buffer didn't contain the requested number of data. Only available data (or no data) has been returned  (slave mode only).<br />     ERR_OVERRUN - Overrun error was detected from last character or block receiving (slave mode only)<br />     ERR_ARBITR - Arbitration lost (only when interrupt service is disabled and in master mode)<br />     ERR_NOTAVAIL - Method is not available in current mode - see the comment in the generated code.
</li>
</ul><br />
</li>
<li><a name="SendStop">
<b>SendStop</b></a>
 - If the &quot;Automatic stop condition&quot; property value is 'no', this method sends a valid stop condition to the serial data line of the I2C bus to terminate the communication on the bus after using send methods. This method is enabled only if &quot;Automatic stop condition&quot; property is set to 'no'.
<ul>
<br /><i>ANSIC prototype:</i> byte SendStop(void)<br />
<li><i>Return value:byte</i> - Error code, possible codes:<br />     ERR_OK - OK<br />     ERR_SPEED - This device does not work in the active speed mode<br />     ERR_DISABLED - Device is disabled<br />     ERR_BUSOFF - Clock timeout elapsed - bus is busy
</li>
</ul><br />
</li>
<li><a name="ClearTxBuf">
<b>ClearTxBuf</b></a>
 - This method clears all characters in internal slave output buffer. This method is not available for the MASTER mode.
<ul>
<br /><i>ANSIC prototype:</i> byte ClearTxBuf(void)<br />
<li><i>Return value:byte</i> - Error code, possible codes:<br />     ERR_OK - OK<br />     ERR_SPEED - This device does not work in the active speed mode
</li>
</ul><br />
</li>
<li><a name="ClearRxBuf">
<b>ClearRxBuf</b></a>
 - This method clears all characters in internal slave input buffer. This method is not available for the MASTER mode.
<ul>
<br /><i>ANSIC prototype:</i> byte ClearRxBuf(void)<br />
<li><i>Return value:byte</i> - Error code, possible codes:<br />     ERR_OK - OK<br />     ERR_SPEED - This device does not work in the active speed mode
</li>
</ul><br />
</li>
<li><a name="GetCharsInTxBuf">
<b>GetCharsInTxBuf</b></a>
 - Returns number of characters in the output buffer. In SLAVE mode returns the number of characters in the internal slave output buffer. In MASTER mode returns number of characters to be sent from the user buffer (passed by SendBlock method).<br/>
This method is not supported in polling mode.
<ul>
<br /><i>ANSIC prototype:</i> word GetCharsInTxBuf(void)<br />
<li><i>Return value:word</i> - Number of characters in the output buffer.
</li>
</ul><br />
</li>
<li><a name="GetCharsInRxBuf">
<b>GetCharsInRxBuf</b></a>
 - Returns number of characters in the input buffer. In SLAVE mode returns the number of characters in the internal slave input buffer. In MASTER mode returns number of characters to be received into a user buffer (passed by RecvChar or RecvBlock method).<br />This method is not supported in polling mode.
<ul>
<br /><i>ANSIC prototype:</i> word GetCharsInRxBuf(void)<br />
<li><i>Return value:word</i> - Number of characters in the input buffer.
</li>
</ul><br />
</li>
<li><a name="SelectSlave">
<b>SelectSlave</b></a>
 - This method selects a new slave for communication by its 7-bit slave address value. Any send or receive method directs to or from selected device, until a new slave device is selected by this method. This method is not available for the SLAVE mode.
<ul>
<br /><i>ANSIC prototype:</i> byte SelectSlave(byte Slv)<br />
<li><i>Slv:byte</i> - 7-bit slave address value.</li>
<li><i>Return value:byte</i> - Error code, possible codes:<br />     ERR_OK - OK<br />     ERR_BUSY - The device is busy, wait until the current operation is finished.<br />     ERR_SPEED - This device does not work in the active speed mode<br />     ERR_DISABLED -  The device is disabled
</li>
</ul><br />
</li>
<li class="versionspecdetail"><span class="versionspeclabel">Methods for Freescale 56800/E, HCS08, HCS12X, RS08, ColdFire V1 and HCS12 HY/HA derivatives.</span>
<ul>
<li><a name="SelectSlave10">
<b>SelectSlave10</b></a>
 - This method selects a new slave for communication by its 10-bit slave address value. Any send or receive method directs to or from selected device, until a new slave device is selected by this method. This method is not available for the SLAVE mode.
<ul>
<br /><i>ANSIC prototype:</i> byte SelectSlave10(word Slv)<br />
<li><i>Slv:word</i> - 10-bit slave address value.</li>
<li><i>Return value:byte</i> - Error code, possible codes:<br />     ERR_OK - OK<br />     ERR_BUSY - The device is busy, wait until the current operation is finished.<br />     ERR_SPEED - This device does not work in the active speed mode<br />     ERR_DISABLED -  The device is disabled
</li>
</ul><br />
</li>
<li><a name="SelectSpecialCommand">
<b>SelectSpecialCommand</b></a>
 - This method selects a special command. Any send or receive method directs to or from selected device, until a new slave device is selected by this method. This method is not available for the SLAVE mode. Certain commands may not be supported on a specific derivative, if IIC module does not have the capability.
<ul>
<br /><i>ANSIC prototype:</i> byte SelectSpecialCommand(byte Cmd)<br />
<li><i>Cmd:byte</i> - Special command. Possible values:<br />     0 - General call address<br />     1 - Start byte</li>
<li><i>Return value:byte</i> - Error code, possible codes:<br />     ERR_OK - OK<br />     ERR_BUSY - The device is busy, wait until the current operation is finished.<br />     ERR_SPEED - This device does not work in the active speed mode<br />     ERR_DISABLED -  The device is disabled<br />     ERR_RANGE -  Requested command is not supported.
</li>
</ul><br />
</li>
</ul>
</li>
<li><a name="GetSelected">
<b>GetSelected</b></a>
 - This method returns 7-bit slave address value of the slave, which is currently selected for communication with the master. This method is not available for the SLAVE mode.
<ul>
<br /><i>ANSIC prototype:</i> byte GetSelected(byte *Slv)<br />
<li><i>Slv: Pointer to byte</i> - Current selected slave address value.</li>
<li><i>Return value:byte</i> - Error code, possible codes:<br />     ERR_OK - OK<br />     ERR_SPEED - This device does not work in the active speed mode
</li>
</ul><br />
</li>
<li class="versionspecdetail"><span class="versionspeclabel">Methods for Freescale 56800/E, HCS08, HCS12X, RS08, ColdFire V1 and HCS12 HY/HA derivatives.</span>
<ul>
<li><a name="GetSelected10">
<b>GetSelected10</b></a>
 - This method returns 10-bit slave address value of the slave, which is currently selected for communication with the master. This method is not available for the SLAVE mode.
<ul>
<br /><i>ANSIC prototype:</i> byte GetSelected10(word *Slv)<br />
<li><i>Slv: Pointer to word</i> - Current selected slave address value (16. bit value).</li>
<li><i>Return value:byte</i> - Error code, possible codes:<br />     ERR_OK - OK<br />     ERR_SPEED - This device does not work in the active speed mode
</li>
</ul><br />
</li>
</ul>
</li>
<li><a name="SetMode">
<b>SetMode</b></a>
 - This method sets actual operating mode of this component. This method is available only for the MASTER - SLAVE mode.<br/>
Note: If MASTER mode is selected as an operating mode, the device can still be selected as a slave and receive/transmit data. However, it's necessary to select slave operating mode using SetMode( FALSE ) to access this data.
<ul>
<br /><i>ANSIC prototype:</i> byte SetMode(bool MasterMode)<br />
<li><i>MasterMode:bool</i> - Operating mode value:
     <a href="..\..\DOCs\BeanCodeTypicalUsage.html#Bool">true</a> - Master
     <a href="..\..\DOCs\BeanCodeTypicalUsage.html#Bool">false</a> - Slave</li>
<li><i>Return value:byte</i> - Error code, possible codes:<br />     ERR_OK - OK<br />     ERR_SPEED - This device does not work in the active speed mode
</li>
</ul><br />
</li>
<li><a name="GetMode">
<b>GetMode</b></a>
 - This method returns the actual operating mode of this component.
<ul>
<br /><i>ANSIC prototype:</i> bool GetMode(void)<br />
<li><i>Return value:bool</i> - Actual operating mode value
     <a href="..\..\DOCs\BeanCodeTypicalUsage.html#Bool">true</a> - Master
     <a href="..\..\DOCs\BeanCodeTypicalUsage.html#Bool">false</a> - Slave
</li>
</ul><br />
</li>
<li class="versionspec"><span class="versionspeclabel">Methods for HC(S)08, HCS12(X), ColdFire V1, RS08, MCF and 56800/E derivatives.</span>
<ul>
<li><a name="CheckBus">
<b>CheckBus</b></a>
 - This method returns the status of the bus. If the START condition has been detected, the method returns 'ComponentName'_BUSY. If the STOP condition has been detected, the method returns 'ComponentName'_IDLE.
<ul>
<br /><i>ANSIC prototype:</i> byte CheckBus(void)<br />
<li><i>Return value:byte</i> - Status of the bus.
</li>
</ul><br />
</li>
</ul>
</li>
           </ul>
<!---USERBEG DON'T CHANGE THIS LINE-->

<!---USEREND DON'T CHANGE THIS LINE-->
<p>
<br />
Note: Some methods can be implemented as macros.
</p>
          </div>
          <p class="footer">
            PROCESSOR EXPERT is trademark of Freescale Semiconductor, Inc.
            <br />
            Copyright 1997 - 2010 Freescale Semiconductor, Inc.
          </p>
    </td>
  </tr>

</table>

</body>
</html>
